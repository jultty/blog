<!DOCTYPE html>
<html lang="pt-BR" id="theme">

    <head prefix="og: https://ogp.me/ns/website#">
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8" >
      <meta name="viewport" content="width=device-width, initial-scale=1">

      <title>Scripts em OCaml ~ jutty.dev</title>

      <link href="https://blog.jutty.dev/assets/css/style.css" rel="stylesheet">
      <link rel="stylesheet" type="text/css" href="https://blog.jutty.dev/assets/css/syntax-dark.css" media="(prefers-color-scheme: dark)" />
      <link rel="stylesheet" type="text/css" href="https://blog.jutty.dev/assets/css/syntax-light.css" media="(prefers-color-scheme: light)" />

      <link rel="icon" type="image/png" sizes="36x36" href="https://blog.jutty.dev/assets/img/icons/kitty/kitty_32.png">
      <link rel="icon" type="image/png" sizes="16x16" href="https://blog.jutty.dev/assets/img/icons/kitty/kitty_16.png">
      <link rel="icon" type="image/png" sizes="128x128" href="https://blog.jutty.dev/assets/img/icons/kitty/kitty_circle_128.png">

      <link rel="me" href="https://mastodon.bsd.cafe/@jutty">

      <meta property="og:title" content="Scripts em OCaml ~ jutty.dev" />
      <meta property="og:description" content="Este blog gera suas postagens com o Pandoc, mas quem faz o trabalho lógico de identificar os arquivos e montar os comand…" />
      <meta property="og:type" content="website" />
      <meta property="og:url" content="https://blog.jutty.dev/pt/posts/scripts-em-ocaml/" />
      <meta property="og:image" content="https://blog.jutty.dev/assets/img/icons/kitty/kitty_circle_192.png" />
      <meta name="fediverse:creator" content="@jutty@bsd.cafe">

      
      <link rel="alternate" type="application/rss+xml" title="Todo o conteúdo (Português)" href="https://blog.jutty.dev/pt/atom.xml">
      <link rel="alternate" type="application/rss+xml" title="Posts (Português)" href="https://blog.jutty.dev/pt/posts/atom.xml">
      <link rel="alternate" type="application/rss+xml" title="Notas (Português)" href="https://blog.jutty.dev/pt/notes/atom.xml">
      <link rel="alternate" type="application/rss+xml" title="Links" href="https://blog.jutty.dev/links/atom.xml">
    </head>

    <body>
      <div id="container">
        <div>
        <a id="skip-to-main" href="#main">Saltar para o conteúdo</a>
        <div id="user-controls" class="subpage-user-controls">
          <nav id="nav-menu">
            <ul>
              <li><a id="home" href="https://blog.jutty.dev/pt">Início</a></li>
              <li><a href="https://blog.jutty.dev/pt/posts">Posts</a></li>
              <li><a href="https://blog.jutty.dev/pt/notes">Notas</a></li>
              <li><a href="https://blog.jutty.dev/pt/links">Links</a></li>
              <li><a href="https://blog.jutty.dev/pt/feeds">RSS</a></li>
              <li><a href="https://mastodon.bsd.cafe/@jutty">Mastodon</a></li>
            </ul>
          </nav>
          
        </div>
        </div>

        <main id="main">
        <article class="blog-post">
          <h1 id="post-title">Scripts em OCaml</h1>
          <time class="post-date">2024-02-23 00:00:00</time>
          <p>Este blog gera suas postagens com o Pandoc, mas quem faz o trabalho lógico de identificar os arquivos e montar os comandos é um pequeno script em OCaml.</p>
<p>Descobri essa linguagem quando comecei a investigar como poderia substituir o Bash como uma linguagem para scripts. Eu acho que o Bash é excelente para cumprir essa função, apesar de bastante inseguro e propenso a erros. O que me incomodava mesmo era ver que todo aquele tempo escrevendo scripts com Bash poderia ser tempo aprendendo uma linguagem cujo conhecimento se transferisse para muitas outras aplicações.</p>
<p>O script se resume a:</p>
<pre data-lang="ocaml" class="language-ocaml z-code"><code class="language-ocaml" data-lang="ocaml"><span class="z-source z-ocaml"><span class="z-keyword z-other z-ocaml">let</span> <span class="z-variable z-other z-constant z-ocaml">pandoc_params</span> <span class="z-keyword z-operator z-assignment z-ocaml">=</span> 
</span><span class="z-source z-ocaml">  <span class="z-string z-quoted z-double z-ocaml"><span class="z-punctuation z-definition z-string z-begin z-ocaml">&quot;</span>--css ../../assets/style.css -s --to html5 --metadata pagetitle=&#39;basename&#39; <span class="z-punctuation z-definition z-string z-end z-ocaml">&quot;</span></span>
</span><span class="z-source z-ocaml">
</span><span class="z-source z-ocaml"><span class="z-meta z-function z-ocaml"><span class="z-keyword z-other z-function-definition z-ocaml">let</span> <span class="z-entity z-name z-function z-ocaml">vert</span> <span class="z-variable z-parameter z-ocaml">md</span> <span class="z-keyword z-operator z-ocaml">=</span></span> <span class="z-meta z-begin-end-group z-ocaml"><span class="z-keyword z-control z-begin-end z-ocaml">begin</span>
</span></span><span class="z-source z-ocaml"><span class="z-meta z-begin-end-group z-ocaml">  <span class="z-keyword z-control z-ocaml">if</span> md <span class="z-keyword z-operator z-symbol z-ocaml">&lt;</span><span class="z-keyword z-operator z-symbol z-ocaml">&gt;</span> <span class="z-string z-quoted z-double z-ocaml"><span class="z-punctuation z-definition z-string z-begin z-ocaml">&quot;</span>gen.ml<span class="z-punctuation z-definition z-string z-end z-ocaml">&quot;</span></span> <span class="z-keyword z-operator z-infix z-ocaml">&amp;&amp;</span> md <span class="z-keyword z-operator z-symbol z-ocaml">&lt;</span><span class="z-keyword z-operator z-symbol z-ocaml">&gt;</span> <span class="z-string z-quoted z-double z-ocaml"><span class="z-punctuation z-definition z-string z-begin z-ocaml">&quot;</span>html<span class="z-punctuation z-definition z-string z-end z-ocaml">&quot;</span></span> <span class="z-keyword z-control z-ocaml">then</span>
</span></span><span class="z-source z-ocaml"><span class="z-meta z-begin-end-group z-ocaml">    ignore<span class="z-meta z-paren-group z-ocaml">( <span class="z-meta z-module-reference z-ocaml">Sys.</span>command <span class="z-meta z-paren-group z-ocaml">(
</span></span></span></span><span class="z-source z-ocaml"><span class="z-meta z-begin-end-group z-ocaml"><span class="z-meta z-paren-group z-ocaml"><span class="z-meta z-paren-group z-ocaml">      <span class="z-string z-quoted z-double z-ocaml"><span class="z-punctuation z-definition z-string z-begin z-ocaml">&quot;</span>pandoc <span class="z-punctuation z-definition z-string z-end z-ocaml">&quot;</span></span> <span class="z-keyword z-operator z-infix z-ocaml">^</span> pandoc_params <span class="z-keyword z-operator z-infix z-ocaml">^</span> md <span class="z-keyword z-operator z-infix z-ocaml">^</span> <span class="z-string z-quoted z-double z-ocaml"><span class="z-punctuation z-definition z-string z-begin z-ocaml">&quot;</span> -o html/<span class="z-punctuation z-definition z-string z-end z-ocaml">&quot;</span></span> <span class="z-keyword z-operator z-infix z-ocaml">^</span> md <span class="z-keyword z-operator z-infix z-ocaml">^</span> <span class="z-string z-quoted z-double z-ocaml"><span class="z-punctuation z-definition z-string z-begin z-ocaml">&quot;</span>.html <span class="z-punctuation z-definition z-string z-end z-ocaml">&quot;</span></span>
</span></span></span></span><span class="z-source z-ocaml"><span class="z-meta z-begin-end-group z-ocaml"><span class="z-meta z-paren-group z-ocaml"><span class="z-meta z-paren-group z-ocaml">    )</span> )</span>
</span></span><span class="z-source z-ocaml"><span class="z-meta z-begin-end-group z-ocaml"><span class="z-keyword z-control z-begin-end z-ocaml">end</span></span> <span class="z-punctuation z-terminator z-expression z-ocaml">;;</span>
</span><span class="z-source z-ocaml">
</span><span class="z-source z-ocaml"><span class="z-keyword z-other z-ocaml">let</span> <span class="z-variable z-other z-constant z-ocaml">contents</span> <span class="z-keyword z-operator z-assignment z-ocaml">=</span> <span class="z-meta z-module-reference z-ocaml">Array.</span>to_list <span class="z-meta z-paren-group z-ocaml">(<span class="z-meta z-module-reference z-ocaml">Sys.</span>readdir <span class="z-string z-quoted z-double z-ocaml"><span class="z-punctuation z-definition z-string z-begin z-ocaml">&quot;</span>.<span class="z-punctuation z-definition z-string z-end z-ocaml">&quot;</span></span>)</span> <span class="z-keyword z-other z-ocaml">in</span>
</span><span class="z-source z-ocaml"><span class="z-meta z-module-reference z-ocaml">List.</span>map vert contents <span class="z-punctuation z-terminator z-expression z-ocaml">;;</span>
</span></code></pre>
<p>Primeiro, armazeno em <code>pandoc_params</code> os parâmetros comuns que serão passados ao Pandoc para gerar os arquivos HTML a partir dos arquivos em Markdown.</p>
<p>Em seguida, defino a função <code>vert</code>, que, caso o arquivo não se chame “gen.ml” (o próprio script) nem “html” (o diretório onde os arquivos gerados ficam), o comando do Pandoc é chamado com os nomes dos arquivos de entrada e saída.</p>
<p>Essa função então é aplicada com <code>List.map vert contents</code> a cada arquivo do diretório atual.</p>
<h2 id="referencias">Referências</h2>
<ul>
<li><a href="https://rosettacode.org/wiki/Walk_a_directory/Non-recursively#OCaml">Walk a directory/Non-recursively - Rosetta Code</a></li>
<li><a href="https://jez.io/pandoc-markdown-css-theme/">Pandoc Markdown CSS Theme</a></li>
</ul>

        </article>
        </main>

        <footer>
  <hr/>
  <p class="footer-text">feito por <a href="https://jutty.dev">jutty</a>
    com <a href="https://www.getzola.org/">Zola</a>
    &bullet; 
    <a href="https://github.com/jultty/blog">código fonte</a>
    sob a licença BSD
    &bullet; <a href="https://blog.jutty.dev/acknowledgments">créditos</a>
    <br/>
    gerado em <time>2025-10-31 03:49 UTC</time>,
    1761882572&#xba; segundo não-bissexto da Era Unix
  </p>
</footer>
      </div>
    </body>
  </html>
